# Hospital Journal

Электронный журнал входящих и исходящих писем для больницы.

## Возможности
- Авторизация сотрудников и общий журнал писем.
- Создание, просмотр, редактирование и удаление писем.
- Поиск по ФИО и по номерам входящего/исходящего писем.
- Секции «Входящее», «Исходящее», «Перенос» с раскрытием/сворачиванием.
- Поля «Другое» для МКБ, кода операции, организации и почты.
- Автоматическое определение типа письма (`incoming`/`outgoing`) по заполненным номерам.
- История изменений и отметка автора/редактора.
- Индикатор просрочки (если входящее письмо без даты отправки дольше 5 дней).

## Как это работает
- Письмо может иметь два номера: входящий и исходящий. Часто они разные.
- Тип письма определяется автоматически:
  - если заполнен только входящий номер — `incoming`
  - если заполнен только исходящий номер — `outgoing`
  - если заполнены оба — сохраняется текущий тип записи
- Поиск проверяет ФИО, входящий и исходящий номера. Можно писать `вх 123` или `исх 123` для уточнения.
- Поля «Другое» появляются, если в списке выбран пункт «Другое».
- Блок «Перенос» показывает поля организации и почты только когда указаны обе даты переноса.

## Запуск
1. Установить зависимости:
```
npm install
```

2. Инициализировать базу (опционально):
```
npm run init-db
```

3. Запустить сервер:
```
npm start
```

Открыть в браузере:
```
http://localhost:3000/journal-login.html
```

Режим разработки (автоперезапуск):
```
npm run dev
```

## Тестовые данные
Создание тестовых писем (для проверки функционала):
```
node scripts/seedLetters.js
```

## Тестовые логины
- journal1 / journal123
- journal2 / journal123
- journal3 / journal123

## Структура
```
hospital-journal/
  server.js
  package.json
  database.db
  scripts/
    initDb.js
    seedLetters.js
  public/
    journal-login.html
    journal-login.js
    journal.html
    journal.js
    journal.css
```
